<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="recruit">

<delete id="delete">
delete from recruit_board where recruit_num = #{recruit_num}
</delete>


<select id="currval" resultType="String">
select seq_recruit_num.currval from dual
</select>


<update id="update">
update recruit_board set recruit_num=#{recruit_num}, recruit_start=#{recruit_start}, employee_pattern=#{employee_pattern}
,recruit_end=#{recruit_end}, recruit_title=#{recruit_title}, recruit_content=#{recruit_content}
<!-- ,파일변경  -->
where recruit_num = #{recruit_num}

</update>


<select id="detail" resultType="recruit.RecruitVO">

select r.*, c.code_name code_name
from recruit_board r, common_code c
where r.employee_pattern = c.code_value
and recruit_num = #{recruit_num}
</select>


<select id="list" resultType="recruit.RecruitVO">
select r.*, c.code_name
from recruit_board r, common_code c
where r.employee_pattern = c.code_value
order by recruit_start
</select>


<select id="pattern" resultType="recruit.CommonCodeVO">
select *
from common_code
where code_title = 'H'
</select>


<insert id='insert'>
<!-- <![CDATA[ -->
insert into recruit_board
(recruit_num, file_name, file_path, 
recruit_start, recruit_end, 
recruit_title, recruit_content, employee_pattern)
values (
seq_recruit_num.nextval, #{file_name, jdbcType=VARCHAR}, #{file_path, jdbcType=VARCHAR},
 #{recruit_start}, #{recruit_end},  
 #{recruit_title, jdbcType=VARCHAR}, #{recruit_content, jdbcType=VARCHAR}
<choose>
	<when test='employee_pattern == -1'>,'H101'</when>
	<otherwise>,'H102'</otherwise>
</choose>
)

<!-- ]]> -->
</insert>


</mapper>